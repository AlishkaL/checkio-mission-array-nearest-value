<body data-author="freeman_lex">
<div class="question-answer">
    <div class="question">
        <i>I have no idea how to start solving this mission!</i>
    </div>
    <div class="answer">
        <p>
            üí° The idea is simple: you just need to sort the initial array using correct compare function - first, by distance between an element and the given one, second - by elements ascending (to choose smaller one in case two numbers are on the same distance).
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>
            It looks clear, but I need a step-by-step instructions. What should I start from?
        </i>
    </div>
    <div class="answer">
        <p>
            First, you should read about <a target="_blank" href="https://www.w3schools.com/jsref/jsref_sort.asp">array.sort()</a> method and how to <a target="_blank" href="https://www.w3schools.com/js/js_array_sort.asp">sort arrays</a>.
        </p>
        <pre class="brush: javascript">
return values.sort(function(a, b){...});
// or shorter
return values.sort((a, b) => ...);
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>Ok. How to find distance between an element and the given number?</i>
    </div>
    <div class="answer">
        <p>
            Distance is an absolute difference between two numbers. So use method <a target="_blank" href="https://www.w3schools.com/jsref/jsref_abs.asp">Math.abs()</a> 
        </p>
        <pre class="brush: javascript">
Math.abs(s-a);
Math.abs(s-b);
        </pre>    
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>Explain, how to sort elements by their distance to the given number?</i>
    </div>
    <div class="answer">
        <p>
            Let's sort elements by distance in ascending order. It means the element with shorter distance to <b class="code">s</b> should go before ones with longer. And the difference between these distances (shorter - longer) is negative.
        </p>
        <pre class="brush: javascript">
return values.sort((a, b) => Math.abs(s-a) - Math.abs(s-b));
        </pre>
        <p>
            What you get here. If <b class="code">a</b> is closer to <b class="code">s</b> (shorter distance), and <b class="code">b</b> is farther, the difference of distances is negative. In case, the result of compare function is negative, the first element <b class="code">a</b> goes before the second - <b class="code">b</b>. And that's exactly what you need to sort elements in ascending (by distance) order.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>
            That is tricky! But what to do, if two elements are on the same distance from the given number?
        </i>
    </div>
    <div class="answer">
        <p>
            In this case the result of compare function equals 0. You may use logical operator <a target="_blank" href="https://www.w3schools.com/js/js_comparisons.asp">|| (or)</a> to join two comparisons. If the first is not equal 0, it's enough - the second is not calculated. But if the first is equal 0, the second is checking to get non-zero value. 
        </p>
        <pre class="brush: javascript">
return values.sort((a,b) => Math.abs(s-a)-Math.abs(s-b) || ...);
        </pre>
        <p>
            This condition is much easier than previous. According the description, you should choose the smaller element between two on the same distance from <b class="code">s</b>. It's the same ascending sorting, but for elements.
        </p>
        <pre class="brush: javascript">
return values.sort((a,b) => Math.abs(s-a)-Math.abs(s-b) || a-b);
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>
            So, how my final solution should look like?
        </i>
    </div>
    <div class="answer">
        <p>
            You have an array, sorted ascending. So the nearest element is the smallest in the array (the leftest). Take it using indexing. You also need to wrap your the code into function expression.
        </p>
        <pre class="brush: javascript">
function nearestValue(values: number[], s: number): number {

    return values.sort((a,b) => Math.abs(s-a)-Math.abs(s-b) || a-b)[0];
    // or
    return values.sort((a,b) => Math.abs(s-a)-Math.abs(s-b) || a-b).shift();
}
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>Show me more solutions!<br />
        'Cause I wanna be a real ü•á Javascript Hero!</i>
    </div>
    <div class="answer">
        <p>Sure, grab it!</p>
        <p>
            In this solution anonymous function is used and squares of differences are used instead of absolute values.
        </p>
        <pre class="brush: javascript">
var nearestValue = (v, s) => v.sort((a,b) => (s-a)**2 - (s-b)**2 || a-b)[0];
        </pre>
        <p>
            Add the given number into the array, sort it, find and compare two nearest elements to the given number. Notice the multiple ternary operators.
        </p>
        <pre class="brush: javascript">
function nearestValue(values: number[], s: number): number {

    values.push(s);
    const sorted = values.sort((a,b) => a - b);
    const i = sorted.indexOf(s);
    const x = sorted[i-1];
    const y = sorted[i+1];
    return x === undefined ? y :
           y === undefined ? x :
           y - s >= s - x ? x : y;
}
        </pre>
        <p><b>Click "Best solutions" an mission menu and see more interesting solutions!</b></p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <i>Thanks! I know and understand more now! Everything works fine!</i>
    </div>
    <div class="answer">
        üëç Glad to hear it!
    </div>
</div>
</body>
